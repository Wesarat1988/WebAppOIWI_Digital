:root {
    --app-font-base: 16px;
}

#app-shell {
    --app-font-scale: 1;
    font-size: calc(var(--app-font-base) * var(--app-font-scale));
}

#app-shell.text-zoom-small {
    --app-font-scale: 0.9;
}

#app-shell.text-zoom-normal {
    --app-font-scale: 1;
}

#app-shell.text-zoom-large {
    --app-font-scale: 1.15;
}

#app-shell,
#app-shell .shell__sidebar,
#app-shell .shell__content,
#app-shell .content-area,
#app-shell .topbar,
#app-shell .menu__item,
#app-shell .menu__text,
#app-shell .table,
#app-shell .table thead th,
#app-shell .table tbody td,
#app-shell .form-control,
#app-shell .form-select,
#app-shell .btn,
#app-shell .nav-link,
#app-shell input,
#app-shell select,
#app-shell textarea,
#app-shell label,
#app-shell .card,
#app-shell .modal,
#app-shell .dropdown-menu {
    font-size: inherit;
}

/* ===== PDF Preview ===== */
.document-preview-frame {
    min-height: 80vh;
    height: calc(100vh - 220px);
    max-height: 95vh;
    overflow: auto; /* เลื่อนในกรอบ */
    background: #f8f9fa;
}

/* Toolbar */
.pdfjs-toolbar {
    display: flex;
    align-items: center;
    gap: .5rem;
    padding: .5rem .75rem;
    margin-bottom: .75rem;
    background: #fff;
    border: 1px solid #e2e8f0;
    border-radius: .5rem;
    position: sticky;
    top: 0;
    z-index: 2;
}

.pdfjs-toolbar__group {
    display: flex;
    align-items: center;
    gap: .5rem;
}

.pdfjs-btn {
    border: 1px solid #cbd5e1;
    background: #fff;
    border-radius: .375rem;
    padding: .25rem .5rem;
    min-width: 2.25rem;
    line-height: 1.2;
    cursor: pointer;
    box-shadow: 0 1px 1px rgba(0,0,0,.04);
}

    .pdfjs-btn:hover {
        background: #f8fafc;
    }

.pdfjs-sep {
    width: 1px;
    height: 22px;
    background: #e2e8f0;
    display: inline-block;
}

.pdfjs-zoom {
    min-width: 3.5rem;
    text-align: center;
    font-weight: 600;
}

/* Pages */
.pdfjs-pages {
    display: block;
}

.pdfjs-page {
    margin: 0 auto 1rem auto;
    max-width: 1200px;
}

.pdfjs-page-canvas {
    display: block;
    width: 100%;
    height: auto;
    background: #fff;
    box-shadow: 0 .5rem 1.25rem rgba(0,0,0,.08);
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
}

/* ปิด textLayer เด็ดขาดไม่ให้บัง PDF */
.textLayer, .pdfjs-textLayer {
    display: none !important;
}

/* Loading / Error */
.pdfjs-loading, .pdfjs-error {
    font-size: .95rem;
    text-align: center;
    padding: 1rem;
}

/* Hide any pdf.js text layer (all variants) */
.textLayer,
.pdfjs-textLayer,
[class*="textLayer"] {
    display: none !important;
    visibility: hidden !important;
    pointer-events: none !important;
}

/* โครง PDF pages */
.pdfjs-pages {
    width: 100%;
    max-width: 1200px;
    margin-inline: auto;
}

.pdfjs-page {
    margin: 0 auto 16px;
}

.pdfjs-page-canvas {
    display: block;
    background: #fff;
    box-shadow: 0 8px 24px rgba(0,0,0,.10);
}

/* ===== Full Screen PDF Viewer ===== */
.document-preview-frame {
    position: relative;
}

.document-preview-frame.pdf-fullscreen-active {
    position: fixed;
    inset: 0;
    z-index: 1090;
    background: #000;
    border-radius: 0;
    border: none;
    display: flex;
    flex-direction: column;
    box-shadow: none;
}

.document-preview-frame.pdf-fullscreen-active .document-viewer {
    flex: 1;
    display: flex;
    flex-direction: column;
}

.document-preview-frame.pdf-fullscreen-active .document-toolbar {
    background: rgba(17, 17, 17, 0.85);
    border-bottom: 1px solid rgba(255, 255, 255, 0.15);
    color: #fff;
}

.document-preview-frame.pdf-fullscreen-active:focus {
    outline: 2px solid rgba(255, 255, 255, 0.35);
    outline-offset: 0;
}

.document-preview-frame.pdf-fullscreen-active .document-toolbar .btn {
    color: #fff;
    border-color: rgba(255, 255, 255, 0.4);
    background: rgba(255, 255, 255, 0.08);
}

.document-preview-frame.pdf-fullscreen-active .document-toolbar .btn:hover {
    background: rgba(255, 255, 255, 0.18);
    color: #fff;
}

.document-preview-frame.pdf-fullscreen-active .document-container {
    flex: 1;
    overflow: auto;
    padding: 1.5rem 0;
    background: transparent;
}

.document-preview-frame.pdf-fullscreen-active .pdfjs-viewer {
    padding: 0 1.5rem;
}

.pdf-fullscreen-nav {
    display: none;
}

.document-preview-frame.pdf-fullscreen-active .pdf-fullscreen-nav {
    position: fixed;
    left: 50%;
    bottom: 2rem;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 0.75rem 1.5rem;
    border-radius: 999px;
    background: rgba(17, 17, 17, 0.75);
    box-shadow: 0 12px 32px rgba(0, 0, 0, 0.55);
    z-index: 1100;
}

.pdf-fullscreen-nav .btn {
    color: #fff;
    border-color: rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.08);
    padding-inline: 1.25rem;
}

.pdf-fullscreen-nav .btn:hover {
    background: rgba(255, 255, 255, 0.18);
    color: #fff;
}

.pdf-fullscreen-nav .btn:disabled {
    opacity: 0.45;
    cursor: not-allowed;
}

.pdf-fullscreen-page-indicator {
    font-weight: 600;
    font-size: 1.05rem;
    letter-spacing: 0.02em;
    color: #fff;
}

.pdf-preview-status {
    position: absolute;
    inset: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    padding: 1.5rem;
    z-index: 10;
    pointer-events: none;
}

.pdf-preview-status.alert {
    pointer-events: auto;
    width: min(640px, 90%);
    margin: 0 auto;
}

.pdf-fullscreen-error {
    margin: 0;
    border-radius: 0;
}

.document-preview-frame.pdf-fullscreen-active .pdf-fullscreen-error {
    background: rgba(255, 193, 7, 0.18);
    color: #fff;
    border-color: rgba(255, 193, 7, 0.45);
}

/* ===== Sidebar / Brand Logo ===== */

/* ความกว้าง sidebar */
.shell__sidebar {
    width: 240px;
    background: linear-gradient(180deg,#0d47a1 0%, #1976d2 55%, #e3f2fd 100%);
    padding: 16px 12px;
}

/* กล่องวางโลโก้ ให้อยู่กึ่งกลาง และเว้นระยะ */
.brand {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 10px 8px;
}

.brand--flush {
    padding: 12px 8px;
}
/* คงสไตล์ flush แต่ยังมีระยะนิดหน่อยให้โค้งไม่ชนขอบ */

/* ลิงก์ห่อโลโก้ให้เป็นบล็อกคลิกทั้งรูป */
.brand__link {
    display: block;
}

/* — โลโก้: ย่อขนาด + ทำขอบมน — */
.brand-logo {
    display: block;
    width: 68%; /* ปรับขนาดที่นี่ (เช่น 60–80%) */
    max-width: 140px; /* กันบานเมื่อจอใหญ่ */
    height: auto;
    border-radius: 16px; /* ขอบมน */
    background: #fff; /* พื้นหลังขาวให้ดูคม */
    padding: 6px; /* ระยะจากขอบมน */
    border: 1px solid rgba(255,255,255,.6);
    box-shadow: 0 6px 18px rgba(13,71,161,.18);
    object-fit: contain; /* ป้องกันยืดภาพ */
}

/* Hover เล็กน้อย */
.brand__link:hover .brand-logo {
    transform: translateY(-1px);
    box-shadow: 0 10px 24px rgba(13,71,161,.22);
    transition: all .15s ease;
}

/* ===== โหมดย่อแถบ (มี class shell--collapsed ที่ div#app-shell อยู่แล้ว) ===== */
.shell--collapsed .shell__sidebar {
    width: 84px;
    padding-inline: 10px;
}

.shell--collapsed .menu__text {
    display: none;
}
/* ซ่อนชื่อเมนู เหลือแต่ไอคอน */
.shell--collapsed .brand-logo {
    width: 48px; /* ย่อโลโก้ให้เล็กลง */
    max-width: 48px;
    padding: 4px;
    border-radius: 12px;
}

/* ให้คอนเทนต์หลักชิดดีเมื่อ sidebar ย่อ/ขยาย */
.shell__content {
    min-width: 0;
}

/* ===== Sidebar / Brand Logo ===== */
.shell__sidebar {
    width: 260px; /* เดิม 240px → เผื่อพื้นที่โลโก้ใหญ่ขึ้น */
    background: linear-gradient(180deg,#0d47a1 0%, #1976d2 55%, #e3f2fd 100%);
    padding: 16px 12px;
}

.brand {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 12px 10px;
    min-height: 92px; /* เพิ่มความสูงกล่องโลโก้ให้ดูโปร่ง */
}

.brand--flush {
    padding: 14px 10px;
}

.brand__link {
    display: block;
}

/* โลโก้: ขยายให้ใหญ่ขึ้น */
.brand-logo {
    display: block;
    width: 88%; /* เดิม ~68% → ใหญ่ขึ้นชัด */
    max-width: 200px; /* กันบานเกินไปบนจอใหญ่ */
    height: auto;
    border-radius: 16px;
    background: #fff;
    padding: 8px; /* เพิ่ม padding เพื่อให้ขอบมนดูสวย */
    border: 1px solid rgba(255,255,255,.6);
    box-shadow: 0 8px 22px rgba(13,71,161,.22);
    object-fit: contain;
}

/* Hover */
.brand__link:hover .brand-logo {
    transform: translateY(-1px);
    box-shadow: 0 12px 28px rgba(13,71,161,.26);
    transition: all .15s ease;
}

/* โหมดย่อแถบ */
.shell--collapsed .shell__sidebar {
    width: 90px;
    padding-inline: 10px;
}

.shell--collapsed .menu__text {
    display: none;
}

.shell--collapsed .brand-logo {
    width: 64px; /* เดิม 48px → ให้โลโก้ในโหมดย่อใหญ่ขึ้นนิด */
    max-width: 64px;
    padding: 6px;
    border-radius: 12px;
}

/* === Fix Bootstrap Modal to light theme === */
.modal-backdrop.show {
    background: rgba(15,23,42,.45); /* เงาหลังจอ */
    backdrop-filter: blur(2px);
}

/* กล่อง modal */
.modal .modal-dialog {
    margin: 1.25rem auto;
}

.modal .modal-content {
    background: #ffffff; /* พื้นสว่าง */
    color: #111827; /* ตัวอักษรเข้มอ่านง่าย */
    border: 1px solid #e5e7eb;
    border-radius: 16px;
    box-shadow: 0 24px 48px rgba(15,23,42,.28);
    overflow: hidden;
}

/* ส่วนหัว */
.modal .modal-header {
    background: #f8fafc; /* เทาอ่อน */
    border-bottom: 1px solid #e5e7eb;
    padding: .9rem 1.1rem;
}

.modal .modal-title {
    font-weight: 700;
    color: #0f172a;
}

/* ปุ่มปิดให้มองเห็นบนพื้นสว่าง */
.modal .btn-close {
    filter: none; /* ลบ invert ที่อาจเคยใส่ไว้ */
    opacity: .7;
}

    .modal .btn-close:hover {
        opacity: 1;
    }

/* ส่วนเนื้อหา/ท้าย */
.modal .modal-body {
    padding: 1rem 1.1rem;
}

.modal .modal-footer {
    border-top: 1px solid #e5e7eb;
    padding: .75rem 1.1rem 1rem;
    background: #fff;
}

/* ฟอร์มภายใน popup */
.modal .form-label {
    color: #334155;
    font-weight: 600;
}

.modal .form-text {
    color: #64748b;
}

.modal .form-control,
.modal select,
.modal textarea {
    background: #fff;
    color: #111827;
    border: 1px solid #cbd5e1;
    border-radius: 10px;
}

    .modal .form-control:focus,
    .modal select:focus,
    .modal textarea:focus {
        border-color: #3b82f6;
        box-shadow: 0 0 0 3px rgba(59,130,246,.18);
        outline: none;
    }

/* ตาราง/เส้นแบ่งใน popup */
.modal hr,
.modal .table > :not(caption) > * > * {
    border-color: #e5e7eb;
}

/* ป้องกันธีมมืดจากที่อื่นมาทับ (เช่น body.dark) */
.modal * {
    color-scheme: light;
}
